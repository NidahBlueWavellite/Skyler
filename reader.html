<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Skyler, I wish to breathe another season pdf</title>
<meta name="description" content="Skyler: A nature-inspired, slice-of-life novel about friendship, resilience, and self-discovery.">

<!-- Favicon / browser tab logo -->
<link rel="icon" type="image/jpg" href="s.jpg">

<!-- Open Graph (social media previews) -->
<meta property="og:title" content="Skyler Novel">
<meta property="og:description" content="Skyler: A nature-inspired, slice-of-life novel about friendship, resilience, and self-discovery.">
<meta property="og:image" content="logo.png">
<meta property="og:url" content="https://bluewavellite.github.io/Skyler/">
<meta property="og:type" content="website">



<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

<style>
  body {
    margin:0;
    font-family:'Roboto Slab', serif;
    background: #0d2a3a;
    color: #fff;
    display:flex;
    flex-direction:column;
    height:100vh;
  }

  .toolbar {
    display:flex;
    align-items:center;
    gap:10px;
    background:#082133;
    padding:8px 16px;
    position:sticky;
    top:0;
    z-index:10;
  }

  .toolbar button, .toolbar input {
    background-color:#eee;
    border:none;
    padding:6px 10px;
    border-radius:4px;
    cursor:pointer;
    color:#0d2a3a;
    font-weight:600;
  }

  .toolbar input[type="number"] {
    width:60px;
    text-align:center;
  }

  #pdf-container {
    flex:1;
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:18px;
    gap:14px;
  }

  canvas {
    box-shadow:0 0 8px rgba(0,0,0,0.5);
    border-radius:4px;
    width:auto;
    max-width:95vw;
  }
</style>
</head>
<body>

<div class="toolbar">
  <button id="closeBtn">Close</button>
  <button id="zoomOut">âˆ’</button>
  <span>Zoom</span>
  <button id="zoomIn">+</button>
  <span>Page:</span>
  <input type="number" id="pageNumber" value="1" min="1">
  <span id="pageCount">/ ?</span>
</div>

<div id="pdf-container"></div>

<script>
  // Get PDF URL from query string
  const urlParams = new URLSearchParams(window.location.search);
  const pdfUrl = urlParams.get("file");

  if (!pdfUrl) {
    alert("PDF file not specified!");
    throw new Error("No PDF file provided");
  }

  const pdfContainer = document.getElementById("pdf-container");
  const pageNumInput = document.getElementById("pageNumber");
  const pageCountSpan = document.getElementById("pageCount");

  let pdfDoc = null;
  let scale = 1.2;
  let canvases = [];

  pdfjsLib.GlobalWorkerOptions.workerSrc =
    "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";

  pdfjsLib.getDocument(pdfUrl).promise.then((pdf) => {
    pdfDoc = pdf;
    pageCountSpan.textContent = "/ " + pdf.numPages;
    renderAll();
  }).catch(err => {
    alert("Failed to load PDF: " + err.message);
    console.error(err);
  });

  function renderAll() {
    pdfContainer.innerHTML = "";
    canvases = [];

    for (let i = 1; i <= pdfDoc.numPages; i++) {
      pdfDoc.getPage(i).then((page) => {
        const viewport = page.getViewport({ scale });
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        pdfContainer.appendChild(canvas);

        page.render({ canvasContext: ctx, viewport });
        canvases.push(canvas);
      });
    }
  }

  // Jump to page
  pageNumInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      const p = Number(pageNumInput.value);
      if (p >= 1 && p <= pdfDoc.numPages) {
        canvases[p-1].scrollIntoView({ behavior: "smooth" });
      }
    }
  });

  // Zoom
  document.getElementById("zoomIn").onclick = () => { scale += 0.2; renderAll(); };
  document.getElementById("zoomOut").onclick = () => { if(scale>0.6){ scale -= 0.2; renderAll(); } };

  // Close
  document.getElementById("closeBtn").onclick = () => { window.close(); };
</script>

</body>
</html>
